{% extends "base.html" %}
{% block content %}


<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
<script>
function showCustomerDetails(selectElement) {
  const customerDetails = document.getElementById('customer-details');
  const customerName = document.getElementById('customer-name');
  const customerPhone = document.getElementById('customer-phone');
  const customerEmail = document.getElementById('customer-email');
  const customerWorkplace = document.getElementById('customer-workplace');

  
  if (selectElement.value === 'Choose customer') {
    customerDetails.classList.add('hidden');
    customerDetails.classList.add('opacity-0');
    return;
  }
  
  const selectedOption = selectElement.options[selectElement.selectedIndex];
  const customerData = JSON.parse(selectedOption.getAttribute('data-customer'));
  
  customerName.textContent = customerData.name;
  customerPhone.textContent = customerData.phone;
  customerEmail.textContent = customerData.email || 'N/A';
  customerWorkplace.textContent = customerData.workplace || 'N/A';
  customerDetails.classList.remove('hidden');
  setTimeout(() => {
    customerDetails.classList.remove('opacity-0');
  }, 150);
}
</script>

<ol class="inline-flex items-center x-4 px-4 py-3 rounded-lg">
    <li class="inline-flex items-center">
        <a href="/" class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white transition-colors duration-200">
            <svg class="w-4 h-4 me-2" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                <path d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"/>
            </svg>
            Home
        </a>
    </li>
    <li aria-current="page">
        <div class="flex items-center">
            <svg class="rtl:rotate-180 w-4 h-4 text-gray-400 mx-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"/>
            </svg>
            <span class="ms-0 text-sm font-medium text-gray-500 md:ms-1 dark:text-gray-400">Issues</span>
        </div>
    </li>
</ol>


<div class="grid grid-cols-3 gap-4 p-6 bg-white rounded-t-lg shadow-md dark:bg-gray-800 dark:border-gray-700 mb-1">
  <div class="col-span-2">
    <h1 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">Second Hand Phones</h1>
    <p class="mb-3 font-normal text-gray-700 dark:text-gray-400">Browse and manage second-hand phone inventory</p>
  </div>
  <div class="grid grid-cols-4 gap-1 mb-4"></div>
  <!-- Line Chart -->
  <div class="col-span-1 rounded-lg h-24 bg-white dark:bg-gray-800 p-4">
    <div class="w-full" id="line-chart"></div>
    <script>
      const chartData = {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
        series: [
          {
            name: 'Sales',
            data: [30, 40, 35, 50, 49, 60, 70],
            color: '#3B82F6'
          }
        ]
      };

      const chartOptions = {
        chart: {
          type: 'line',
          height: '50px', // تصغير ارتفاع الرسم البياني
          width: '40%',
          sparkline: {
            enabled: true // إخفاء جميع العناصر ما عدا الخط
          },
        },
        stroke: {
          curve: 'smooth',
          width: 2
        },
        markers: {
          size: 0
        },
        colors: ['#3B82F6'],
        tooltip: {
          enabled: false // إخفاء التلميحات
        },
        grid: {
          show: false // إخفاء الشبكة
        },
        dataLabels: {
          enabled: false
        },
        xaxis: {
          labels: {
            show: false // إخفاء تسميات المحور X
          },
          axisBorder: {
            show: false
          },
          axisTicks: {
            show: false
          }
        },
        yaxis: {
          labels: {
            show: false // إخفاء تسميات المحور Y
          }
        }
      };

      new ApexCharts(document.querySelector('#line-chart'), {
        ...chartData,
        ...chartOptions
      }).render();
    </script>
  </div>
</div>

    

     <div class="grid sm:grid-cols-1 md:grid-cols-3 gap-1 mb-4">
        <!-- Select Customer -->
        <div class="rounded-b-lg h-64 bg-white dark:bg-gray-800 shadow-md p-6">
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Select Customer</h3>
          <select id="customer" onchange="showCustomerDetails(this)" class="w-full p-3 text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-300 flowbite-select">
            <option selected>Choose customer</option>
            {% for customer in customers %}
              <option value="{{ customer.id }}" data-customer='{"name":"{{ customer.name }}","phone":"{{ customer.phone }}","email":"{{ customer.email }}","workplace":"{{ customer.workplace }}"}'>{{ customer.name }} - {{ customer.phone }}</option>
            {% endfor %}
          </select>
        </div>
      

<!-- Customer details container -->
<div id="customer-details" class="md:col-span-2 hidden rounded-r-lg rounded-br-lg h-60 bg-white dark:bg-gray-800 shadow-md p-6 overflow-auto transition-all duration-1000 ease-in-out opacity-0">
    <!-- Title and image -->
    <div class="flex items-center mb-4 flex-row-reverse">
      <div class="w-12 h-12 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center overflow-hidden">
        <svg class="w-8 h-8 text-gray-400 dark:text-gray-300" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path>
        </svg>
      </div>
      <h3 class="text-lg font-semibold text-gray-900 dark:text-white ml-4">Customer Details</h3>
    </div>
  
    <!-- Info grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Basic info -->
      <div class="space-y-3 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <!-- Name -->
        <div class="flex items-start">
          <svg class="w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"></path>
          </svg>
          <div>
            <span class="font-medium text-gray-600 dark:text-gray-300 block">Name:</span>
            <span id="customer-name" class="text-gray-900 dark:text-white"></span>
          </div>
        </div>
        <!-- Phone -->
        <div class="flex items-start">
          <svg class="w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
          </svg>
          <div>
            <span class="font-medium text-gray-600 dark:text-gray-300 block">Phone:</span>
            <span id="customer-phone" class="text-gray-900 dark:text-white"></span>
          </div>
        </div>
      </div>
  
      <!-- Detailed info -->
      <div class="space-y-3 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <!-- Workplace -->
        <div class="flex items-start">
          <svg class="w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>
          </svg>
          <div>
            <span class="font-medium text-gray-600 dark:text-gray-300 block">Workplace:</span>
            <span id="customer-workplace" class="text-gray-900 dark:text-white"></span>
          </div>
        </div>
        <!-- Email -->
        <div class="flex items-start">
          <svg class="w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>
            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>
          </svg>
          <div>
            <span class="font-medium text-gray-600 dark:text-gray-300 block">Email:</span>
            <span id="customer-email" class="text-gray-900 dark:text-white"></span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



      
    <div class="grid grid-cols-1 gap-2 mb-4">
      <div class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-48 md:h-72"></div>
      <div class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-48 md:h-72"></div>
      <div class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-48 md:h-72"></div>
      <div class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-48 md:h-72"></div>
   </div>
    <div class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-96 mb-4"></div>
    <div class="grid grid-cols-2 gap-4">
      <div class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-48 md:h-72"></div>
      <div class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-48 md:h-72"></div>
      <div class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-48 md:h-72"></div>
      <div class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-48 md:h-72"></div>
    </div>
  </div>
</div>


{% endblock %}